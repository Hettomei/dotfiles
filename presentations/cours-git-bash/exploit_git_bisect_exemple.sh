#!/bin/sh

# this is created to be exploited during a git bisect
# man git-bisect /EXAMPLES
#
# $ git bisect start HEAD origin --    # HEAD is bad, origin is good
# $ git bisect run exploit_git_bisect_exemple.sh

# tweak the working tree by merging the hot-fix branch
# and then attempt a build
if	git stash apply
then
  mocha -R dot -r ./test/setup.js  -- test/unit/MyClass.spec.js
  status=$?
else
  # tell the caller this is untestable
  status=125
fi

# undo the tweak to allow clean flipping to the next commit
git reset --hard

# return control
exit $status
